# Mix Poker App - 統合テスト計画書 (Mix & Stability)

目的: キャッシュゲームにおけるゲーム種目の切り替え、プレイヤーの出入り、および接続断などの異常系動作において、システムが整合性を保てるか検証する。

## 1. ゲームローテーションと切り替え (Game Rotation)

| ID | テスト項目 | 条件・手順 | 期待される挙動 (Pass条件) | チェック |
| --- | --- | --- | --- | --- |
| MX-01 | Flop → Stud 遷移 | 設定: Mix (NLH → 7CS) 1) NLHのオービット終了までプレイ 2) 次のハンドへ移行 | UIがコミュニティカード形式から個別ボード形式に崩れず切替、Dealerボタンが消える、Ante/Bring-inが正しく徴収される | □ |
| MX-02 | Stud → Draw 遷移 | 設定: Mix (7CS → 2-7 TD) 1) 7CS終了 2) 次のハンドへ移行 | ドローボタン付きUIに切替、Dealerボタン復活と位置正しい、SB/BBが正しく徴収される | □ |
| MX-03 | ボタン位置の保存 | 設定: 3人以上 1) NLHでボタンがPlayer Aの状態で終了 2) Studを数ハンド 3) NLH/Drawに戻る | Stud中もボタン位置が追跡され、次のBlindゲームでPlayer Bに正しく移動 | □ |
| MX-04 | ゲーム名表示更新 | 設定: 全ゲーム 1) ゲーム切替発生 | ヘッダーのゲーム名が即時更新、全クライアントが同期 | □ |

## 2. 入室・着席処理 (Entry & Sitting)

| ID | テスト項目 | 条件・手順 | 期待される挙動 (Pass条件) | チェック |
| --- | --- | --- | --- | --- |
| EN-01 | ハンド進行中の着席 | 状況: ハンド進行中 1) 新規プレイヤーが入室し着席 | 即座に参加せず次ハンド待機、進行中のハンドにカードが配られない | □ |
| EN-02 | BB待ち (Wait for BB) | 状況: UTG等のポジションに着席 1) 次ハンド開始 2) BBとボタンの間に着席 | BBが回ってくるまで待機、SBでBB額を取られない | □ |
| EN-03 | 満席時の挙動 | 状況: 6maxに6人着席 1) 7人目が着席を試みる | 満席エラー、サーバーがクラッシュしない | □ |
| EN-04 | リバイ (Re-buy) | 状況: 手持ちが0 1) リバイを実行 | 次のハンド開始時にチップ補充（途中補充は反映されない） | □ |

## 3. 退室・離席処理 (Exit & Leaving)

| ID | テスト項目 | 条件・手順 | 期待される挙動 (Pass条件) | チェック |
| --- | --- | --- | --- | --- |
| EX-01 | アクション要求中の退室 | 状況: 自分のターン 1) ブラウザを閉じる or Leave | 自動Fold/Check、ゲーム継続し次のプレイヤーへ | □ |
| EX-02 | SB/BBの退室 | 状況: プリフロップ 1) SBがブラインド支払直後に退室 | SBはポットに残り、ハンド続行 | □ |
| EX-03 | ヘッズアップ中の退室 | 状況: 2人対戦 1) 片方が退室 | 不戦勝で即ハンド終了、次ハンドは開始されずWaiting状態 | □ |
| EX-04 | シッティングアウト | 状況: Sit Out 1) Sit OutをON | 現在のハンドは最後まで、次のハンドから参加しない | □ |

## 4. 接続安定性と異常系 (Connectivity & Edge Cases)

| ID | テスト項目 | 条件・手順 | 期待される挙動 (Pass条件) | チェック |
| --- | --- | --- | --- | --- |
| CN-01 | リロード (F5) | 状況: ハンド参加中 1) ブラウザリロード | 自動的に着席復帰、手札再表示、アクション復帰 | □ |
| CN-02 | 素早い連打 | 状況: ベット時 1) ボタン連打 | 1回のみ受理、二重払いなし | □ |
| CN-03 | ゲーム切替時の切断 | 状況: Mix切替の瞬間 1) 一人が切断 | サーバー側で切替正常、再接続時UIが最新 | □ |
| CN-04 | 観戦モード | 状況: 着席せず観戦 1) 進行中ゲームを見る 2) ショーダウン | 手札は非公開、ショーダウン時のみ公開、アクションボタンなし | □ |

## 効率的なテスト実施のヒント

- ローテーションを1ハンドごとに切替、または強制切替ボタンを使うと高速に検証可能。
- 複数ブラウザ/プロファイルで同時検証（A/B/C/Spectator）。
- DevToolsのOfflineで疑似切断。
